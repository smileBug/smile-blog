---
title: JavaScript 正则表达式
date: 2016-08-20 17:10:46
categories:
	JS
tags:
	正则表达式
---
说起正则表达式还真是个反人类的东西，初次见它的时候，我还怀疑这个真不是乱码吗。。。。
<!-- more -->
学习前端以来，前前后后过了两遍的正则表达式，但都是学了就学了，头两天还能记得，但长时间不去使用，就又给忘了，一直没能记住，导致现在要进行第三遍。这次通过写博客的方式记下来，时不时翻开看看，想来总能降伏它了。就算不能掌握，记录下来这些语法，以后好查阅。

## 概念
Regular Expression,正则表达式使用单个字符串来描述、匹配一系列符合某个句法规则的字符串。
说白了，就是按照某种规则去匹配符合条件的字符串。


## 正则语法
学习语法这里着重推荐一个网址：https://regexper.com/
将正则表达式通过图形的方式表现出来，形象易于理解，真乃学习正则利器。
### 元字符
正则表达式由两种基本字符类型组成：
>* 原义文本字符：就是代表它本身含义的字符，比如a就是字母a，2就是数字2；
>* 元字符：就是正则中有特殊含义的非字母字符。

原义文本字符没什么好讲，重点是元字符。
常用的元字符：

| 代码      | 含义   |
| --------  | :-----  |
| .         | 匹配除换行符以外的任意字符 |
| \w        | 匹配字母或数字或下划线或汉字 |
| \s        | 匹配任意的空白符    |
| \d        | 匹配数字    |
| \b        | 匹配单词的开始或结束    |
| ^         | 匹配字符串的开始 |
| $         | 匹配字符串的结束 |

### 字符类
当需要匹配某类字符的时候的时候就需要字符类。
用元字符[]来构建一个简单的类。
通过字符类可以轻松指定一个字符范围，比如[0-5]代表0到5中任意某个数字。

其中，当字符类中出现^符号表示反向类，即不属于某类的内容的意思。比如[^0-5]表示匹配不是0到5的数字
### 预定义类
正则表达式提供了预定义类来匹配常见的字符类

| 代码      | 等价类   | 含义 |
| --------  | :-----  | :-----|
|.|[^\r\n]|除回车符和换行符以外的所有字符|
| \d        | [0-9] |数字字符|
|\D|[^0-9]|非数字字符|
|\s|[\t\n\x0B\f\r]|空白符|
|\S|[^\t\n\x0B\f\r]|非空白符|
|\w|[a-zA-Z_0-9]|单词字符（字母、数字下划线）|
|\W|[^a-zA-Z_0-9]|非单词字符|

### 重复（量词）
当需要多次匹配相同规则的时候，正则也给我们提供了重复的方式。

| 代码      | 含义   |
| --------  | :-----  |
| *         | 重复零次或更多次 |
| +         | 重复一次或更多次 |
| ？        | 重复零次或一次    |
| {n}       | 重复n次   |
| {n,}      | 重复n次或更多次    |
| {n,m}     | 重复n到m次 |
| {0,n}     | 最多重复n次 |

### 贪婪与懒惰
当正则表达式中包含能接受重复的限定符时，通常的行为是匹配尽可能多的字符。这就是贪婪模式。

而当我们需要懒惰模式（非贪婪模式），即让正则表达式尽可能少的匹配时，只要在重复后面加上问好?即可。
比如：

| 代码      | 含义   |
| --------  | :-----  |
| *?         | 重复任意次，但尽可能少重复 |
| +?        | 重复1次或更多次，但尽可能少重复 |
| ??        | 重复0次或1次，但尽可能少重复    |
| {n,} ?     | 重复n次以上，但尽可能少重复    |
| {n,m} ?    | 	重复n到m次，但尽可能少重复 |

### 分组
使用（）可以当到分组的功能，通过量词重复分组。
默认情况下，每个分组会自动拥有一个组号，规则是：从左向右，以分组的左括号为标志，第一个出现的分组的组号为1，第二个为2，以此类推。

如果是想使用（）进行分组而不捕获，只需要在分组内加上“? :”。

## RegExp对象
JavaScript通过内置对象RegExp来支持正则表达式。创建方式有字面量和构造函数。
### 通过字面量创建
```
var reg = /pattern /flags ;
```
其中模块（pattern）是任何简单或复杂的正则表达式。每个正则表达式都可带一个或多个标志（flags）用来表明正则表达式的行为。其中包括g(全局模式)，i（不区分大小写模式）和m（多行模式）三个标志。
比如
```
//匹配所有以“.at”结尾的三个字符的组合，不区分大小写
var reg = /\.at /gi
```
### 通过构造函数创建
```
var reg = new RegExp("pattern","flags")
```
它接收两个参数：一个是要匹配的字符串模式，另一种是可选的标志字符串。
注意：由于RegExp构造函数的 模式参数是字符串，所以在某些情况下要对字符进行双重转义。
比如：
```
//匹配所有以“.at”结尾的三个字符的组合，不区分大小写
var reg =new RegExp("\\.at","gi")
```
